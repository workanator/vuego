<!DOCTYPE html>
<html>
<head>
    <title>#TITLE#</title>
    <link href="/static/css/roboto.min.css" rel="stylesheet">
    <link href="/static/css/vuetify.min.css" rel="stylesheet">
    <script src="/static/js/vue.min.js"></script>
    <script src="/static/js/vuetify.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    #HEAD#
</head>
<body>
    #BODY#
    #MODEL#
    <script>
        let ws = new WebSocket('ws://' + window.location.host + '/ws', 'Bus.Read');
        ws.addEventListener("message", function (ev) {
            console.info('Message');
            for (let k in Model) {
                if (Model[k].hasOwnProperty("message")) {
                    Model[k].message = JSON.parse(ev.data).data;
                }
            }
        });
        ws.addEventListener("open", function (ev) {
            console.info('Connected');
            ws.send("Can we talk?");
        });
        ws.addEventListener("close", function (ev) {
            console.info('Closed');
        });
        ws.addEventListener("error", function (ev) {
            console.info("Error");
            console.info(ev)
        });
    </script>
</body>
</html>